{% extends "base.html" %}
{% load url from future %}
{% block body %}
  <div class="container">
    <div class="row lead">
      <div class="pull-left">{{ process.process_name }}</div>
      <div class="pull-right">Create a New Process Request</div>
    </div>
    <br/>
    <form class="form-horizontal" action="{% url 'create_process_request' process.id %}" method="post">
      {% csrf_token %}

      {{ form.non_field_errors }}
      <div class="control-group">
        <label class="control-label">Process: </label>
        <div class="controls">
          {{ process.process_name }}
        </div>
      </div>
      {% for field in form %}
      <div class="control-group">
        <label class="control-label">{{ field.label }}</label>
        <div class="controls">
          {{ field }}
          {% if field.errors %}
            <span class="help-inline">{{ field.label }}: {{ field.errors|striptags }}</span>
          {% endif %}
        </div>
      </div>
      {% endfor %}
      {{ formset.management_form }}
      <h4>Inputs:</h4>

        {% for input_form in formset %}
          {% for hidden_field in input_form.hidden_fields %}
            {% if hidden_field.name == 'process_input' %}
              {{ hidden_field.as_hidden }}
            {% elif hidden_field.name == 'value_label' %}

              {{ hidden_field.as_hidden }}

              <div class="control-group">

              <label class="control-label">
                {{ hidden_field.value }}
              </label>

            {% endif %}
          {% endfor %}

            <div class="controls">

              {{ input_form.value }}

              {% if input_form.value.errors %}
              <span class="help-inline">{{ input_form.value.errors|striptags }}</span>
              {% endif %}
            </div>
          </div>

          <hr/>
          
        {% endfor %}

      <div class="control-group">
        <div class="controls">
          <button class="btn btn-small btn-primary" type="submit">Save</button>
        </div>
      </div>
    </form>
  </div>
{% endblock %}